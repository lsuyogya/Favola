gsap.registerPlugin(Observer);const E=gsap.utils.toArray(".rail-1 h4"),b=gsap.utils.toArray(".rail-2 h4"),R=.5,f=1.5,v=I(E,{repeat:-1,paddingRight:30,speed:R}),y=I(b,{repeat:-1,paddingRight:30,reversed:!0,speed:R});Observer.create({onChangeY(a){let r=f;a.deltaY<0&&(r*=-1),gsap.timeline({defaults:{ease:"none"}}).to(v,{timeScale:r*f,duration:.2,overwrite:!0}).to(y,{timeScale:-r*f,duration:.2,overwrite:!0},"<").to(v,{timeScale:r/f,duration:1},"+=0.3").to(y,{timeScale:-r/f,duration:1},"<")}});function I(a,r){a=gsap.utils.toArray(a),r=r||{};let t=gsap.timeline({repeat:r.repeat,paused:r.paused,defaults:{ease:"none"},onReverseComplete:()=>t.totalTime(t.rawTime()+t.duration()*100)}),p=a.length,T=a[0].offsetLeft,x=[],l=[],u=[],n=0,g=(r.speed||1)*100,m=r.snap===!1?e=>e:gsap.utils.snap(r.snap||1),w,i,P,d,c,s;for(gsap.set(a,{xPercent:(e,o)=>{let h=l[e]=parseFloat(gsap.getProperty(o,"width","px"));return u[e]=m(parseFloat(gsap.getProperty(o,"x","px"))/h*100+gsap.getProperty(o,"xPercent")),u[e]}}),gsap.set(a,{x:0}),w=a[p-1].offsetLeft+u[p-1]/100*l[p-1]-T+a[p-1].offsetWidth*gsap.getProperty(a[p-1],"scaleX")+(parseFloat(r.paddingRight)||0),s=0;s<p;s++)c=a[s],i=u[s]/100*l[s],P=c.offsetLeft+i-T,d=P+l[s]*gsap.getProperty(c,"scaleX"),t.to(c,{xPercent:m((i-d)/l[s]*100),duration:d/g},0).fromTo(c,{xPercent:m((i-d+w)/l[s]*100)},{xPercent:u[s],duration:(i-d+w-i)/g,immediateRender:!1},d/g).add("label"+s,P/g),x[s]=P/g;function L(e,o){o=o||{},Math.abs(e-n)>p/2&&(e+=e>n?-p:p);let h=gsap.utils.wrap(0,p,e),S=x[h];return S>t.time()!=e>n&&(o.modifiers={time:gsap.utils.wrap(0,t.duration())},S+=t.duration()*(e>n?1:-1)),n=h,o.overwrite=!0,t.tweenTo(S,o)}return t.next=e=>L(n+1,e),t.previous=e=>L(n-1,e),t.current=()=>n,t.toIndex=(e,o)=>L(e,o),t.times=x,t.progress(1,!0).progress(0,!0),r.reversed&&(t.vars.onReverseComplete(),t.reverse()),t}
